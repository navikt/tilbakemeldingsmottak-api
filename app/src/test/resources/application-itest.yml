Journalpost_v1_url: journalpost.url
email_from_address: srvtilbakemeldings@preprod.local
email_nav_support_address: nav-support@preprod.local
email_samisk_kontakt_address: samisk-kontakt@preprod.local
email_serviceklage_address: nav.serviceklager@preprod.local
email_uu_address: uu@preprod.local

# application.properties
logging.level.org.springframework.http.converter.json: DEBUG
logging.level.com.fasterxml.jackson.databind: DEBUG

buffersize: 1

ereg:
  api:
    url: eregUrl
hentdokument:
  url: hentDokumentUrl
management:
  metrics:
    export:
      prometheus:
        enabled: true

retry-config:
  sendMail:
    max-attempts: 3
    delay: 10
    multiplier: 2
  safGraphQl:
    max-attempts: 3
    delay: 50
    multiplier: 1.5
  norg2:
    max-attempts: 3
    delay: 50
    multiplier: 1.5
  pdlGraphQl:
    max-attempts: 3
    delay: 50
    multiplier: 1.5
  hentDokument:
    max-attempts: 3
    delay: 50
    multiplier: 1.5

resilience4j:
  retry:
    instances:
      sendMail:
        max-attempts: ${retry-config.sendMail.max-attempts}
        wait-duration: ${retry-config.sendMail.delay}ms
        exponential-backoff-multiplier: ${retry-config.sendMail.multiplier}
        retry-exceptions:
          - java.lang.Exception
      safGraphQl:
        maxAttempts: ${retry-config.safGraphQl.max-attempts}
        waitDuration: ${retry-config.safGraphQl.delay}ms
        exponential-backoff-multiplier: ${retry-config.safGraphQl.multiplier}
        retry-exceptions:
          - java.lang.Exception
      norg2:
        maxAttempts: ${retry-config.norg2.max-attempts}
        waitDuration: ${retry-config.norg2.delay}ms
        exponential-backoff-multiplier: ${retry-config.norg2.multiplier}
        retry-exceptions:
          - java.lang.Exception
      pdlGraphQl:
        maxAttempts: ${retry-config.pdlGraphQl.max-attempts}
        waitDuration: ${retry-config.pdlGraphQl.delay}ms
        exponential-backoff-multiplier: ${retry-config.pdlGraphQl.multiplier}
        retry-exceptions:
          - java.lang.Exception
      hentDokument:
        maxAttempts: ${retry-config.hentDokument.max-attempts}
        waitDuration: ${retry-config.hentDokument.delay}ms
        exponential-backoff-multiplier: ${retry-config.hentDokument.multiplier}
        retry-exceptions:
          - java.lang.Exception

aad:
  authority: https://localhost:${wiremock.server.port}/authority
  clientId: 1111199999
  clientSecret: secret
  email: dummy@dummy.com
  tenant: tenant

cron:
    deleteBigQueryServiceKlagerScheduled: "0 0 0 * * *" # midnight every day
    deleteServiceKlagerScheduled: "0 0 0 * * *" # midnight every day
    deleteBigQueryServiceKlagerOlderThan: 7 # days
    deleteServiceKlagerOlderThan: 90 # days (3 months)

no.nav.security:
  jwt:
    mock:
      enable: true

norg2:
  api:
    v1:
      url: norg2Url
oppgave_oppgaver_url: oppgaveUrl
saf:
  graphql:
    url: safUrl
pdl:
  url: http://localhost:8099/pdlgraphql
graphql:
  endpoint:
    url: ${pdl.url}

auth:
  issuers:
    azuread:
      issuer-uri: http://localhost:${token.server.port}/azuread
      accepted-audience: aud-localhost
      jwk-set-uri: http://localhost:${token.server.port}/azuread/.well-known/openid-configuration
    tokenx:
      issuer-uri: http://localhost:${token.server.port}/tokenx
      accepted-audience: aud-localhost
      jwk-set-uri: http://localhost:${token.server.port}/tokenx/.well-known/openid-configuration

spring:
  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
  security:
    oauth2:
      resourceserver:
        jwt:
          # Spring Boot does not support auto-configuration with multiple issuers directly. Need to configure manually.
      client:
        registration:
          pdl:
            client-id: "dev-gcp:teamserviceklage:tilbakemeldingsmottak-api"
            client-secret: someSecret
            provider: azuread
            authorization-grant-type: client_credentials
            scope: scope-pdl
          arkiv:
            client-id: "dev-gcp:teamserviceklage:tilbakemeldingsmottak-api"
            client-secret: someSecret
            provider: azuread
            authorization-grant-type: client_credentials
            scope: scope-arkiv
          oppgave:
            client-id: "dev-gcp:teamserviceklage:tilbakemeldingsmottak-api"
            client-secret: someSecret
            provider: azuread
            authorization-grant-type: client_credentials
            scope: scope-oppgave
          oppgave-obo:
            client-id: "dev-gcp:teamserviceklage:tilbakemeldingsmottak-api"
            client-secret: someSecret
            provider: azuread
            authorization-grant-type: urn:ietf:params:oauth:grant-type:jwt-bearer
            client-authentication-method: client_secret_post
            scope: scope-oppgave-obo
          saf-obo:
            client-id: "dev-gcp:teamserviceklage:tilbakemeldingsmottak-api"
            client-secret: someSecret
            provider: azuread
            authorization-grant-type: urn:ietf:params:oauth:grant-type:jwt-bearer
            client-authentication-method: client_secret_post
            scope: scope-oppgave-obo

        provider:
          azuread:
            token-uri: http://localhost:${wiremock.server.port}/fake/token
          tokenx:
            token-uri: http://localhost:${token.server.port}/fake/token

token:
  server:
    port: ${mock-oauth2-server.port}

gcp_team_project_id: gcp-team-project-id
big_query_dataset: dataset
log_url: "https://logs.adeo.no"